<!--  If this is the synopsis/first update on planned notice we want to display a heading, and an overview of the planned incident schedule -->
<!-- The update we class as a synopsis depends on the sort order of the timeline. -->
{% if page.timeline_sort_order == 'asc' %}
    <!-- Ascending order, first update is synopsis. -->
    {% assign synopsis = notice.updates.first %}
{% elsif page.timeline_sort_order == 'desc' %}
    <!-- Descending sort order, last is synopsis. -->
    {% assign synopsis = notice.updates.last %}
{% endif %}

<!-- Check if this is maintenance and synopsis. -->
{% if notice.type == 'planned' and update.id == synopsis.id %}
    <!-- This is a planned notice synopsis, so we want heading + schedule -->
    <!-- Include the synopsis header. -->
    <h5 class="update-heading">{{ 'status-page.body.schedule.synopsis' | t }}</h5>

    <!-- Just a standard update, output the content. -->
    {{ update.content | simple_format }}

    <!-- This include details the scheduled datetime and expected duration of the notice. -->
    <ul class="list-unstyled list-schedule-overview text-muted" id="#schedule-overview-{{ notice.id }}">
        <li class="schedule-datetime">
            <!-- Format the begins-date datetime as something more friendly. -->
            {% assign begins_at = notice.begins_at | date: '%a, %-d %b %Y %H:%M %Z' %}
            <!-- Display the begins-at datetime for the notice. -->
            <i class="fa fa-fw fa-calendar"></i> {{ 'status-page.body.schedule.for' | t: begins_at: begins_at }}
        </li>
        <li class="schedule-duration">
            <!-- Create a friendly version of the duration. -->
            {% assign expected_duration = notice.expected_duration | distance_of_time_in_words %}
            <!-- Output the duration. -->
            <i class="fa fa-fw fa-clock-o"></i> {{ 'status-page.body.schedule.expected_duration' | t: expected_duration: expected_duration }}
        </li>
    </ul>
{% else %}
    <!-- Just a standard update, output the content. -->
    {{ update.content | simple_format }}
{% endif %}
